# Моделирование и визуализация динамических систем

![Аттрактор Хедли](https://github.com/chaoticsyst/dynsys/blob/master/media/Hadley.gif)

## Введение

Есть системы дифференциальных уравнений первого порядка на координаты, которые описывают положение точек в пространстве с течением времени. Наше приложение моделирует их, позволяя удобно исследовать данную область.

В частности, приложение уже содержит 35 систем, моделирующих классические странные аттракторы.

Примеры систем уравнений: [Аттрактор Лоренца](https://ru.wikipedia.org/wiki/%D0%90%D1%82%D1%82%D1%80%D0%B0%D0%BA%D1%82%D0%BE%D1%80_%D0%9B%D0%BE%D1%80%D0%B5%D0%BD%D1%86%D0%B0) и [Аттрактор Рёсслера](https://ru.wikipedia.org/wiki/%D0%90%D1%82%D1%82%D1%80%D0%B0%D0%BA%D1%82%D0%BE%D1%80_%D0%A0%D1%91%D1%81%D1%81%D0%BB%D0%B5%D1%80%D0%B0)

## Интерфейс

Интерфейс реализован с помощью Qt5. Включает в себя:
* Выбор модели
* Выбор констант, характеризующих модель
* Детальные настройки моделирования и визуализации
* Возможность записи видео
* Возможность паузы и перематывания времени

![Снимок интерфейса](https://github.com/chaoticsyst/dynsys/blob/master/media/Interface.png)

## Моделирование

Моделирование производится с помощью метода Рунге-Кутты четвертого порядка точности, с постоянным шагом. Написано в стиле метапрограммирования, чтобы достичь максимальной производительности.

Для возможности поддержки моделей, которые не интегрированы в приложение, реализован парсер математических уравнений, который поддерживает стандартные операции (+ - \* /), скобки и основные математические функции (sin, cos, exp, log и т.д.).

Для вычислений не используются никакие дополнительные библиотеки.

## Визуализация

Визуализация производится при помощи OpenGL и обертки Qt над ним.

Приложение берёт несколько точек около изначальной позиции, считает их траектории и затем отображает точки с некоторым хвостом их траектории. Точки, посчитанные моделью, интерполируются кривой Катмулл-Рома.

Реализована воможность свободного перемещения.

Для удобства есть возможность записи видео в формате avi. Для этого используется библиотека libav. Также можно делать снимки экрана.

## Поддержка OS

Приложение поддерживается следующими операционными системами:
* Linux
* Windows
* MacOS

## Инструкция по установке
Требуемые версии библиотек:
* Qt5 — 5.10 и выше.
* libav (libavcodec, libavformat, libavutil, libswscale) — 57 и выше (но желательно иметь хотя бы 58).
* OpenGL — 3.3 и выше.

Далее инструкции для конкретных ОС.

<details>
<summary>
    Linux (U)buntu
</summary>

* Установка Qt:
```
sudo apt-get install qt5-default
```

* Установка libav:
```
sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev
```

* Обновление OpenGL:
    * Чтобы проверить версию:
    ```
    glxinfo | grep "OpenGL version"
    ```
    * Если версия ниже 3.3, необходимо обновить:
    ```
    sudo add-apt-repository ppa:oibaf/graphics-drivers
    sudo apt-get update
    sudo apt-get upgrade
    ```

</details>

<details>
<summary>
Windows
</summary>

*  Чтобы получить необходимую версию C++ (g++7 и выше), скачайте и установите [MinGW](https://sourceforge.net/projects/mingw-w64/files/Multilib%20Toolchains%28Targetting%20Win32%20and%20Win64%29/ray_linn/gcc-9.x-with-ada/), а также добавьте `/path/to/MinGW/bin/` в `PATH`.

* Установите [Cmake](https://cmake.org/download/). Он должен добавиться в `PATH` автоматически.

* Установите Qt5, следуя инструкциям [отсюда](https://doc.qt.io/archives/qt-4.8/install-win.html).

* Скачайте [libav](http://builds.libav.org/windows/nightly-gpl/libav-x86_64-w64-mingw32-20180108.7z) и распакуйте в удобное для Вас место. Затем добавьте `/path/to/libav/bin` и `/path/to/libav/include` в `PATH`.

</details>

## Как использовать?

Чтобы визуализировать модель, необходимо:

* Выбрать модель, которую необходимо смоделировать:
    * Можно выбрать одну из 35 представленных моделей
    * Можно ввести свои собственные дифференциальные уравнения
* Выбрать константы, которые характеризуют модель:
    * Можно выбрать классические значения
    * Можно ввести собственные значения
* Выставить необходимые настройки:
    * Настройки камеры:
    * Настройки моделирования:
    * Настройки визуализации:

Управление:
* `WASDQE` — перемещение вперед / влево / назад / вправо / вверх / вниз

* `F` — вернуться в изначальное положение
* `R` — сделать снимок экрана

## Примеры

![Аттрактор Декуан Ли](https://github.com/chaoticsyst/dynsys/blob/master/media/Dequan%20Li.gif)

![Пример 1](https://github.com/chaoticsyst/dynsys/blob/master/media/Example1.png)

![Пример 2](https://github.com/chaoticsyst/dynsys/blob/master/media/Example2.png)

## Ссылки

Каналы:
* [YouTube](https://www.youtube.com/channel/UCL6pzFtbNd7fZKhABJCvV8g?view_as=subscriber)

* [Telegram](https://t.me/strangeattractors)

## О нас

Приложение пишется в рамках проектной работы в НИУ ВШЭ СПб.

Авторы: [Носивской Владислав](https://github.com/vladnosiv), [Венедиктов Роман](https://github.com/e2e4b6b7), [Карнаухов Кирилл](https://github.com/kkarnauk)
